<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Storage · GD</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GD</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">GD</a></li><li class="is-active"><a class="tocitem" href>Storage</a><ul class="internal"><li><a class="tocitem" href="#Compressor"><span>Compressor</span></a></li><li><a class="tocitem" href="#GDFile"><span>GDFile</span></a></li><li><a class="tocitem" href="#Store"><span>Store</span></a></li></ul></li><li><a class="tocitem" href="../transform/">Transform</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Storage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Storage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/xiorcale/GD.jl/blob/master/docs/src/storage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Storage"><a class="docs-heading-anchor" href="#Storage">Storage</a><a id="Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Storage" title="Permalink"></a></h1><p>The storage module tries to stay as generic as possible, making no assumption about the transformation used or the configuration (e.g., the fingerprint). This is also where the functionalities exposed by the library are living.</p><h2 id="Compressor"><a class="docs-heading-anchor" href="#Compressor">Compressor</a><a id="Compressor-1"></a><a class="docs-heading-anchor-permalink" href="#Compressor" title="Permalink"></a></h2><p>Abstraction used by the used by the store to be able to work independently of the underlying configuration and the transformation. This module is stateless, as it exposes functions which are purely functional. Thus, one store can scale the compressor module easily.</p><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.Compressor" href="#GD.Storage.Compressor"><code>GD.Storage.Compressor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Compressor(chunksize, transformer, fingerprint)</code></pre><p>Compresses/Extracts data according to the loaded configuration. A <code>Compressor</code>  is stateless. It is focused on data compression/extraction but does not store  any value for deduplication.</p><p>fingerprint is a hashing function with the following signature:</p><pre><code class="language-none">fingerprint(data::Vector{Vector{UInt8}})::Vector{Vector{UInt8}}</code></pre><p>Classic examples of fingerprints functions are <code>CRC32</code> and <code>SHA</code> from the standard library.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/compressor.jl#L4-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.compress" href="#GD.Storage.compress"><code>GD.Storage.compress</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">compress(compressor, data)</code></pre><p>Returns a compressed version of <code>data</code>, as well as the bases which need to be used by <code>compressor</code> for reconstructing <code>data</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/compressor.jl#L36-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.extract-Tuple{GD.Storage.Compressor,GD.Storage.GDFile,Array{Array{UInt8,1},1}}" href="#GD.Storage.extract-Tuple{GD.Storage.Compressor,GD.Storage.GDFile,Array{Array{UInt8,1},1}}"><code>GD.Storage.extract</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">extract(compressor, gdfile, bases)</code></pre><p>Decompresses <code>gdfile</code> into its original representation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/compressor.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.hashes" href="#GD.Storage.hashes"><code>GD.Storage.hashes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">hashes(compressor, data)</code></pre><p>Hashes each element in <code>data</code> with the <code>compressor.fingerprint</code> and return an array of hashes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/compressor.jl#L25-L30">source</a></section></article><h2 id="GDFile"><a class="docs-heading-anchor" href="#GDFile">GDFile</a><a id="GDFile-1"></a><a class="docs-heading-anchor-permalink" href="#GDFile" title="Permalink"></a></h2><p>Data structure outputted by the compression process. This structure contains the hashes generated by the fingerprint and the deviations. <code>padsize</code> indicates if the last chunk used for generating the file has been zero-padded. This occurs when the number of chunks given to the compressor is not a multiple of the configured <code>chunksize</code>.</p><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.GDFile" href="#GD.Storage.GDFile"><code>GD.Storage.GDFile</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">GDFile(hashes, deviations, padsize)</code></pre><p>Data structure holding the compressed representation of data generated by a compressor. Suitable for storing (through serialization) or exchanging over  the network.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/gdfile.jl#L1-L7">source</a></section></article><h3 id="Patching"><a class="docs-heading-anchor" href="#Patching">Patching</a><a id="Patching-1"></a><a class="docs-heading-anchor-permalink" href="#Patching" title="Permalink"></a></h3><p>This data structure can be patched by applying a simple delta compression algorithm through the functions <code>patch</code> and <code>unpatch</code>. The functionality can be leveraged when distributed stores are working together, as long as all the stores communicating posses the original file (<code>gdfile2</code>) to either <code>patch</code> or <code>unpatch</code> the modified version (<code>gdfile1</code>).</p><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.patch" href="#GD.Storage.patch"><code>GD.Storage.patch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">patch(gdfile1, gdfile2)</code></pre><p>Patches <code>gdfile1</code> by replacing the hashes/deviations which are the same as <code>gdfile2</code> by <code>[0x00]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/gdfile.jl#L24-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.unpatch" href="#GD.Storage.unpatch"><code>GD.Storage.unpatch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">unpatch(gdfile1, gdfile2)</code></pre><p>Unpachtes <code>gdfile1</code> by repalcing <code>[0x00]</code> from <code>gdfile1</code> by the value contianed in <code>gdfile2</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/gdfile.jl#L37-L42">source</a></section></article><h2 id="Store"><a class="docs-heading-anchor" href="#Store">Store</a><a id="Store-1"></a><a class="docs-heading-anchor-permalink" href="#Store" title="Permalink"></a></h2><p>The store glues the other module together and offer an easy-to-use API for  the (de)compression of chunks.</p><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.Store" href="#GD.Storage.Store"><code>GD.Storage.Store</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Store(compressor, database)</code></pre><p>Unifies the <code>Compressor</code> module and the database. The <code>Store</code> handles the deduplication process by storing the bases generated by the <code>Compressor</code> into the <code>database</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.compress!" href="#GD.Storage.compress!"><code>GD.Storage.compress!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">compress!(store, data)</code></pre><p>Stores the bases generated from <code>data</code> into the <code>database</code> and returns a compressed version of <code>data</code> as a <code>GDFile</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L26-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.extract-Tuple{GD.Storage.Store,GD.Storage.GDFile}" href="#GD.Storage.extract-Tuple{GD.Storage.Store,GD.Storage.GDFile}"><code>GD.Storage.extract</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">extract(store, gdfile)</code></pre><p>Decompresses the <code>gdfile</code> into its original representation. This methods assumes that a valide <code>GDFile</code> is given as input (the <code>validate()</code> method must return  <code>[]</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L39-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.get" href="#GD.Storage.get"><code>GD.Storage.get</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get(store, hashes)</code></pre><p>returns the values mapped to <code>hashes</code> in <code>store</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.update!" href="#GD.Storage.update!"><code>GD.Storage.update!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">update!(store, hashes}, bases)</code></pre><p>Updates <code>store.database</code> by mapping <code>hashes</code> to <code>bases</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GD.Storage.validate" href="#GD.Storage.validate"><code>GD.Storage.validate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">validate(store, gdfile)</code></pre><p>Checks wether <code>gdfile</code> can be extracted by <code>store</code> or not by returning the list  of unknown hashes used by <code>gdfile</code>. The <code>GDFile</code> is said valid if <code>validate()</code> returns <code>[]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xiorcale/GD.jl/blob/7f3e78ad7a8820d39f2969f140b75f84e33e38d7/src/storage/store.jl#L52-L58">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« GD</a><a class="docs-footer-nextpage" href="../transform/">Transform »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 28 January 2021 11:20">Thursday 28 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
